<!-- Generated from 4221587 on 2023-12-01 @ 14:57 with Emacs 27.1 (Org mode 9.3) -->
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta author="J. Dylan White"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="stylesheet" href="https://jdylanwhite.github.io/css/code.css"/><link rel="stylesheet" href="https://jdylanwhite.github.io/css/site.css"/><title>Subdirectory Index - J. Dylan White</title></head><body><header class="site-header"><div class="container"><div class="site-title"><a class="site-name" href="/">J. Dylan White</a> </div></div><div class="site-masthead"><div class="container"><nav class="nav"><a class="nav-link" href="/">Home</a> <a class="nav-link" href="/projects/">Projects</a> <a class="nav-link" href="/dotfiles/">Dotfiles</a> </nav></div></div></header><div class="container"><div class="site-post"><h1 class="site-post-title">Subdirectory Index</h1><p class="site-post-meta">September 25, 2023</p><div id="content">
<h2><a id="dealing-with-subdirectory-index-files" class="anchor" href="#dealing-with-subdirectory-index-files">¶</a>Dealing with Subdirectory Index Files</h2><div class="outline-text-2" id="text-orgb2ac223">
<p>
Recently, David Wilson hosted a <a href="https://www.youtube.com/watch?v=atKDa510qaM">live stream</a> covering how he rebuilt the <a href="https://systemcrafters.net">SystemCrafters website</a> using Org Mode&rsquo;s publishing capabilities.  This is very timely for me building this page. He discussed working on a series for building a website using Org Mode, but that was over a year ago. Thankfully, he covered a lot of very helpful stuff that I&rsquo;ll definitely be using to build out this site.
</p>

<p>
Somewhat following his lead, I started building out my simple site so far in a similar structure to how David built the SystemCrafters site. Currently, my <code>content</code> directory for the site is structured as such:
</p>

<pre class="example">

+-- index.org
+-- dotfiles.org
+-- projects.org
+-- dotfiles
¦   +-- doom-emacs.org
¦   +-- emacs.org
+-- projects
¦   +-- website.org
¦   +-- website
¦       +-- hosting_on_github.org
¦       +-- initial_build.org

</pre>

<p>
The front page of the site is <code>index.org</code>, and then at the top level are two other documents, along with their accompanying subdirectories. A problem this presents though, is when a user tries to visit the directory level, say <code>./projects/website</code>, they aren&rsquo;t greeted with the content of <code>./projects/website.org</code> but rather a site-map of all of the files sitting in <code>./projects/website</code>. In order to see this content, they of course need to go to <code>./projects/website.html</code>. This is not really ideal.
</p>

<p>
For some reason, David&rsquo;s solution was to modify the existing <code>org-html-publish-to-html</code> function as such:
</p>

<pre>(<span class="org-keyword">defun</span> <span class="org-function-name">org-html-publish-to-html</span> (plist filename pub-dir)
  <span class="org-doc">"Publish an org file to HTML, using the FILENAME as the output directory."</span>
  (<span class="org-keyword">let</span> ((article-path (get-article-output-path filename pub-dir)))
    (<span class="org-keyword">cl-letf</span> (((symbol-function 'org-export-output-file-name)
               (<span class="org-keyword">lambda</span> (extension <span class="org-type">&amp;optional</span> subtreep pub-dir)
                 <span class="org-comment-delimiter">;; </span><span class="org-comment">The 404 page is a special case, it must be named "404.html"</span>
                 (concat article-path
                         (<span class="org-keyword">if</span> (string= (file-name-nondirectory filename) <span class="org-string">"404.org"</span>) <span class="org-string">"404"</span> <span class="org-string">"index"</span>)
                         extension))))
      (org-publish-org-to 'site-html
                          filename
                          (concat <span class="org-string">"."</span> (<span class="org-keyword">or</span> (plist-get plist <span class="org-builtin">:html-extension</span>)
                                          <span class="org-string">"html"</span>))
                          plist
                          article-path))))</pre>

<p>
That&rsquo;s a great solution. And I was going to implement it as I kind of like that approach. However, one that works just as well is to move copy each <code>./&lt;topic&gt;.org</code> as <code>./&lt;topic&gt;/index.org</code>. At first, I thought this wasn&rsquo;t as clean as didn&rsquo;t like that it didn&rsquo;t mimic how I&rsquo;d organically write my content, but I think I prefer this. It&rsquo;s parallel in structure to the <code>./index.org</code> and doesn&rsquo;t require any workarounds.
</p>

<p>
I did still wanted to discuss this here though, because there may be some reason in the future to need to employ this solution.
</p>
</div>
</div></div></div><footer class="site-footer"><div class="container"><div class="row"><div class="column"><p><a href="https://github.com/jdylanwhite">GitHub</a> · <a href="https://www.linkedin.com/in/jdylanwhite5">LinkedIn</a> · <a href="mailto:jdylanwhite5@gmail.com">Email</a></p></div><div class="column align-right"><p><a href="https://github.com/jdylanwhite/jdylanwhite.github.io">Site Source</a></p></div></div></div></footer></body></html>
